using DelimitedFiles, Printf, CSV

AAV_data=[
 0.6649                    48.4025   6.18      0.44405   0.12       0.0;
 0.7311                    44.5725   5.63      4.66252   0.59       0.0;
 1.0475                    42.7962   5.12      9.65808   0.95       0.0;
 1.0453                    38.9662   4.39      13.5435   1.23       0.00978;
 1.2085                    35.0807   3.66      15.6528   1.39       0.424;
 1.2261                    29.4189   3.2       16.9849   1.46       1.038;
 1.3959                    33.9151   3.43      22.0915   1.7        1.611;
 1.5437                    29.9185   3.09      23.5346   1.74       1.865;
 2.1302                    25.2004   2.53      20.0933   1.7        2.2415;
 0.6032                    48.236    6.13      0.222025  0.12       0.0;
 0.8325                    45.6271   5.58      4.99556   0.61       0.0;
 0.9847                    42.5187   5.04      9.65808   0.99       0.0;
 0.977                     38.7997   4.33      13.5435   1.29       0.006815;
 1.3077                    37.8006   3.87      16.8739   1.51       0.1355;
 1.3474                    40.2984   4.03      23.2016   1.84       0.543;
 1.5701                    33.8595   3.25      21.2034   1.73       0.952;
 1.6186                    31.5837   3.01      22.9796   1.85       1.0695;
 2.321                     30.7511   2.77      22.9796   1.94       2.0915;
 0.5635                    48.1805   6.28      0.222025  0.12       0.0;
 0.8215                    44.9055   5.67      5.21758   0.6        0.0;
 1.0486                    42.1302   5.21      10.3242   0.97       0.0;
 0.9196                    38.9662   4.4       14.0986   1.25       0.005015;
 1.2261                    25.6444   2.73      11.2123   1.17       0.2475;
 1.3628                    30.5846   3.06      17.0959   1.44       0.7625;
 1.4224                    31.3062   3.14      19.8712   1.62       1.165;
 1.7223                    30.5846   3.18      23.2016   1.84       1.3405;
 2.0376                    28.6418   2.8       22.4245   1.87       1.9955;
 0.7344                    35.5248   2.23      0.222025  0.1        0.0;
 0.6043                    33.0824   1.97      4.66252   0.35       0.0;
 0.9725                    30.085    1.7       9.21403   0.52       0.0;
 0.9792                    28.0313   1.4       12.2114   0.64       0.013;
 1.2504                    19.3166   0.77      10.2131   0.59       0.219;
 1.5348                    24.8118   1.08      17.651    0.73       0.6161;
 1.773                     22.7581   1.03      18.9831   0.77       1.0395;
 2.3618                    20.4267   1.02      20.7593   0.81       1.3365;
 2.6837                    20.1492   0.95      21.6474   0.87       0.411;
 0.6032                    36.0798   9.77      0.44405   0.13       0.0;
 0.6484                    33.1935   9.01      4.4405    0.77       0.0;
 0.9273                    30.8066   8.54      9.10302   1.27       0.0;
 0.8623                    31.6392   8.02      14.6536   1.87       0.01375;
 1.0431                    24.0347   6.45      14.8757   1.96       0.847;
 1.4268                    19.1501   5.21      14.9867   1.86       1.1045;
 1.407                     19.6496   5.52      18.6501   2.15       1.145;
 1.5834                    19.2056   5.74      22.7575   2.53       1.2295;
 1.9748                    18.3175   5.65      23.4236   2.69       1.622;
 0.6418                    61.0582   2.23      0.222025  0.1        0.0;
 0.7763                    57.6167   1.93      4.77353   0.36       0.0;
 1.0155                    56.3956   1.64      9.76909   0.55       0.0;
 0.9174                    47.6809   1.03      12.2114   0.68       0.006755;
 1.2592                    40.798    0.86      12.8774   0.68       0.334;
 1.4621                    53.5092   1.1       21.7584   0.87       0.934;
 1.601                     47.5699   1.03      21.3144   0.84       1.236;
 1.4731                    43.9064   0.89      22.4245   0.89       1.4995;
 2.1225                    44.4615   0.88      23.2016   0.98       1.7655;
 0.5745                    59.5595   9.74      0.222025  0.13       0.0;
 0.7333                    56.6176   9.01      5.21758   0.8        0.0;
 0.9505                    53.3982   8.31      10.4352   1.29       0.0;
 1.0012                    48.68     6.93      14.9867   1.75       0.00915;
 1.3981                    54.5638   7.69      23.0906   2.41       0.582;
 1.6914                    36.0798   4.86      16.5409   1.97       0.491;
 2.0817                    43.9619   5.66      22.3135   2.49       0.4835;
 2.203                     41.2975   5.39      23.8677   2.86       1.0325;
 3.052                     42.1857   5.22      23.9787   3.03       0.305;
 0.3595                    32.1954   5.03      0.111019  0.33       0;     #begin of bioreactor  - row number i=64
 0.709                     30.4191   4.7       3.77463   0.91       0;
 1.3287                    26.4224   3.97      6.66112   1.32       0;
 1.2691                    24.091    3.54      7.88232   1.46       0;
 0.8777                    21.7041   2.96      8.27089   1.63       0.0152;
 1.49295                   20.4829   2.75      8.49292   1.67       0.3015;
 1.79725                   18.8177   2.49      9.04802   1.65       2.862;
 1.86                      20.4829   2.75      8.49292   1.67       4.625;
 1.75425                   14.3769   2.14      10.9353   1.54       5.77];  #end of bioreactor dataset

 offline_bioreactor=[
 0.3595                    32.1954   5.03      0.111019  0.33       0;     #begin of bioreactor dataset
 0.709                     30.4191   4.7       3.77463   0.91       0;
 1.3287                    26.4224   3.97      6.66112   1.32       0;
 1.2691                    24.091    3.54      7.88232   1.46       0;
 0.8777                    21.7041   2.96      8.27089   1.63       0.0152;
 1.49295                   20.4829   2.75      8.49292   1.67       0.3015;
 1.79725                   18.8177   2.49      9.04802   1.65       2.862;
 1.86                      20.4829   2.75      8.49292   1.67       4.625;
 1.75425                   14.3769   2.14      10.9353   1.54       5.77];


ONLINE_BIOREACTOR_DATA_PATH = "data/online_data_bioreactor_hspb.csv";
datasetOnline = Float64[];
open(ONLINE_BIOREACTOR_DATA_PATH) do file
    for line in eachline(file)
        num = parse(Float64,line)
        #println(num)
        append!(datasetOnline, num)
    end
end
datasetOnline = datasetOnline/10^6;
println(datasetOnline[length(datasetOnline)])

phase ="before_transfection";
phase ="after_transfection";

if phase=="before_transfection"
        offline_bioreactor=offline_bioreactor(1:3,:); #OFFLINE dataset 
    else
        offline_bioreactor=offline_bioreactor(4:9,:); #OFFLINE dataset
end

RUNS=[8 9]; #[1 2 3 4 5 6 7 8]
